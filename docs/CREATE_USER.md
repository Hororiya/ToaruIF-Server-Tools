# Creation user process

## login.php

### Request: 
```json
{
    "id": "",
    "pw": "",
    "auth_code": "",
    "os": 0,
    "carrier": 0,
    "market": 1,
    "lang": 0,
    "uuid": "<UUID>",
    "device": "iPad13,4",
    "token": "<Token>",
    "cl_ver": "6.3.0",
    "os_ver": "iPadOS 18.1",
    "hash_token": "<hashToken>",
    "is_first": 1,
    "native_session_id": "<nativeSessionId>",
    "terminal_id": "<terminalId>",
    "is_tracking_enabled": 0,
    "advertising_id": "00000000-0000-0000-0000-000000000000"
}
```

- `token` : guess it's generated by device?
- `hashToken` : same as above?
- `nativeSessionId` : generated after exchange between `psg.sqex-bridge.jp/native/session`
- `terminalId` : guess it's the terminal UUID
- `advertising_id` : can be `00000000-0000-0000-0000-000000000000` if opted-out (iOS)

### Response: 

```json
{
  "res_code": 0,
  "res_str": "",
  "regist_ok": 1,
  "sess_key": "<cookieToken>",
  "api_url": "https://social.index-if.jp/socialsv/",
  "resource_url": "http://cache.index-if.jp/ver2/",
  "web_url": "https://www.index-if.jp/",
  "auth_code": "<uuidAuth>",
  "auth_code_one_time_key": "",
  "native_tag_name": "<tagName>",
  "link_tag_name": "",
  "native_session_id": "<newNativeSessionId>",
  "patch_version": 145545,
  "is_crypt": 1,
  "topic_name": "index-if"
}
```

## socialsv/Connect 

### Response

```json
{
    "res_code": 0,
    "res_str": "OK",
    "server_time": 1727941056, // Unix actual time
    "session_time": 1727942846, // Unix session time
    "patch_version": 145545, // Patch version
    "tag_schedule_version": 14250 // Schedule Version
}
{
    "hand_shake": {
        "userid": <uid> // Internal UserId (int)
    },
    "do_create_user": 1, // Flag for creating user
    "tutorial_download_idx": 0,
    "inviteid": <inviteId> // The ID which will be seen at login (must be int)
}
```

## socialsv/CreateUser

```json
{
    "res_code": 0,
    "res_str": "OK",
    "server_time": 1727941080,
    "session_time": 1727942846,
    "is_ask_review": [
        1 // ???
    ],
    "patch_version": 145545,
    "tag_schedule_version": 14250,
    "menu_decoration_infos": [ // Home screen characters
        {
            "content_type": 10,
            "param": 601,
            "sp_badgeid": 300000002
        },
        {
            "content_type": 25,
            "param": 2500,
            "sp_badgeid": 2500
        }
    ],
    "is_update_menu_decoration": [ // Update flag
        1
    ]
}
{} // Operation done only server-side. No data were exchanged at all
```